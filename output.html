<div class="b-data__content" id="content">
<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<script src="https://cdn.datatables.net/1.10.16/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/responsive/2.2.1/js/dataTables.responsive.min.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script src="https://cdn.datatables.net/plug-ins/1.10.19/sorting/diacritics-sort.js"></script>
<script src="https://code.highcharts.com/highcharts.js"></script>

<script type="text/javascript">document.getElementsByTagName('article')[0].classList.add('b-data--no-img');</script>
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.16/css/jquery.dataTables.min.css">
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/responsive/2.2.1/css/responsive.dataTables.min.css">
<link rel="stylesheet" type="text/css" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
<style>li{background:none !important;margin:0 !important;padding:0 !important}ul,ol{list-style:initial !important;font-size:medium !important;line-height:1.5 !important}hr{max-width:none !important}*{box-sizing:border-box}body{font:16px Arial}.ui-menu-item-wrapper{font:16px "Noticia Text",serif}.autocomplete{position:relative;display:inline-block}.ui-autocomplete{height:200px;overflow-y:scroll;overflow-x:hidden}.vysledek{width:300%}input{border:1px solid transparent;background-color:#deebf7;padding:10px;font-size:16px;border-radius:5px}input[type=text]{background-color:#2171b5;border-radius:5px;color:white;width:90%}input[type=submit]{background-color:#2171b5;border-radius:5px;color:white;color:#fff}.autocomplete-items{position:absolute;border:1px solid #2171b5;border-radius:5px;border-bottom:0;border-top:0;z-index:99;top:100%;left:0;right:0}.autocomplete-items div{padding:10px;cursor:pointer;background-color:#fff;border-bottom:1px solid #2171b5;border-radius:5px}.autocomplete-items div:hover{background-color:#2171b5;color:white}.autocomplete-active{background-color:DodgerBlue !important;color:#fff}.stranaKlik{cursor:pointer;color:#08519c;font:12px "Noticia Text",serif;float:right;margin-bottom:0}button{background-color:#2171b5;border:0;color:white;padding:15px 32px;text-align:center;text-decoration:none;display:inline-block;font:16px "Noticia Text",serif;border-radius:5px}::-webkit-input-placeholder{color:white}::-moz-placeholder{color:white}:-ms-input-placeholder{color:white}:-moz-placeholder{color:white}#zpetStrany{margin-top:20px}.percent{width:20px}.vysledek{padding:15px;border-top-right-radius:0;border-bottom-right-radius:0}#uber{background-color:#7f0000}#unter{background-color:#b30000}#klikaci{background-color:#006d2c}.mandaty{background-color:#2171b5;border:0;color:white;padding:15px 32px;text-align:center;text-decoration:none;font:16px "Noticia Text",serif;border-radius:5px;border-radius:5px}</style>
<div class="row-main row-main--article">
<h1 class="b-data__title b-data__title--sm">
Dolaďte formu na volby: vyzkoušejte si hlasování ve své obci nanečisto. Trefíte správný výsledek?
</h1>
</div>
<div class="row-main row-main--narrow">
<p class="text-bold text-lg">V našem simulátoru si můžete vyzkoušet, jak se volba projeví na zisku křesel. Poradíme taky, jak na křížkování kandidátů.</p>
<p class="meta meta--icon">
	<span class="icon-svg icon-svg--bullet">
	<svg class="icon-svg__svg" xmlns:xlink="http://www.w3.org/1999/xlink">
		<use xlink:href="https://www.irozhlas.cz/sites/all/themes/custom/irozhlas/img/bg/icons-svg.svg#icon-bullet" x="0" y="0" width="100%" height="100%"></use>
	</svg>
</span>
<!--[[ZPRAVY_SNOWFALL_METADATA:]]-->
</p>



<p>Obecní volby jsou podle politologů nejsložitější v Česku. Jedním z důvodů je množství stran, hnutí a nezávislých kandidátů, kteří se obci od obce liší. Obyvatelé měst navíc volí dvakrát: kromě magistrátu také na radnici městské části. Proto nejprve přinášíme přehled, kdo kandiduje zrovna u vás.</p>
<p>Stačí začít psát název své obce do <span style="background-color: #2171b5;color: white;display: inline;border-radius: 5px;">modrého</span> okna. U pomalejšího připojení k internetu může načtení kandidátky chvíli trvat.</p>
<p></div><div class="row-main row-main--article">
<div id="container">
    <div id="obec">
        <h3>Obec</h3>
        <form onsubmit="return false">
            <div class="autocomplete" style="width:300px;">
                <input id="vyberObce" name="vyberObce" type="text" placeholder="Napište jméno obce">
            </div>
        </form>
    </div>
    <div id="strany"><table id="tabulkaStran" class="display" style="width:100%"></table></div>
    <div id="kandidati"><table id="tabulkaKandidatu" class="display" style="width:100%"></table></div>
    </div><div class="row-main row-main--article"><div id="vysledek" style="width:100%"></div></div><div class="row-main row-main--narrow">
    <div id="zpet"></div>
</div>
</div><div class="row-main row-main--narrow"></p>
<p><em>Zdroj dat: <a href="https://volby.cz/pls/kv2018/kv?xjazyk=CZ&amp;xid=1">volby.cz</a></em></p>
<p><em>U Prahy 9 a obce Lišov simulace nepočítá s volebními obvody, celou kandidátku kvůli zjednodušení výpočtu považuje za jediný volební obvod.</em></p>
<p>Zároveň si můžete tipnout výsledek voleb a sledovat, jak se zisk hlasů promítne do počtu mandátů pro jednotlivé strany. Přepočet samozřejmě není jedna k jedné: mandátů není stejně jako hlasů, proto je mezi oběma čísly rozdíl. Jak velký, ukazuje graf pod kandidátkou.</p>
<p>Mandáty obvykle získají pouze strany, které získají alespoň pět procent hlasů, ty ostatní se z přidělování křesel vyřadí. Systém pro obecní volby ale do jisté míry fandí slabším: pokud překoná pětiprocentní práh pouze jedna strana, hranice postupně klesne až na jedno procento. Můžete si to vyzkoušet v simulátoru: dejte jedné straně 96 a více procent a sledujte, kdo získá mandáty. Podobnou výjimkou je snížení volebního prahu pro strany, které nenaplnily kandidátku.</p>
<div class="b-inline b-inline--right"><div class="b-inline__wrap"><div class="b-inline__content"><div class="text-sm"><h3>Interaktivní kandidátky</h3>Konkrétní kandidáty ve své obci si můžete prohlédnout na <a href = "https://www.irozhlas.cz/volby/obecni-volby-2018-politika-kandidatky-demografie_1808231045_jab">interaktivních kandidátkách iRozhlasu</a>.</div></div></div></div>

<p>Pro přepočet hlasů na mandáty se používá d'Hondtova metoda, která mírně nahrává velkým stranám. Jak přesně výpočet funguje, <a href="https://cs.wikipedia.org/wiki/D%27Hondtova_metoda">popisuje například Wikipedie</a>. Ve větších zastupitelstvech je její vliv poměrně malý, u těch menších nicméně nahrává úspěšným stranám – nepoměr mezi podílem hlasů a mandátů řeší tím, že „přebytečné“ mandáty daruje těm, které už nějaký mandát mají. Podobný efekt má d'Hondtova metoda také při volbách do Poslanecké sněmovny, kde ohýbá výsledky hlavně v malých krajích.</p>
<p>Roli d'Hondtovy metody v kombinaci s volebním prahem jsme ilustrovali na volbách do Poslanecké sněmovny v roce 2017. Simulaci si můžete <a href="https://www.irozhlas.cz/volby/svobodni-a-zeleni-ve-snemovne-vyzkousejte-si-co-udela-posun-petiprocentni_1710240615_zlo">vyzkoušet v samostatném článku</a>.</p>
<h2>Zrádné křížkování</h2>
<p>Nejčastěji kritizované je u obecních voleb hlasování pro jednotlivé členy kandidátky, tedy křížkování. V simulátoru hlasy pro jednotlivé členy nenajdete; pokud si ale chcete prohlédnout všechny kandidáty ve své obci, prohlédněte si naše <a href="https://www.irozhlas.cz/volby/obecni-volby-2018-politika-kandidatky-demografie_1808231045_jab">interaktivní kandidátky</a>. Zjistíte z nich například to, za koho kandidát nastoupil před čtyřmi lety.</p>
<p>Volič tak může dát hlas jedné kandidátní listině a konkrétním kandidátům z konkurenčních stran; těch může být tolik, jako všech mandátů v obci. Takzvané <em>panašování</em> tedy umožňuje volit napříč stranami. Křížky pro jednu stranu se odečtou od listiny, které dal kandidát hlavní hlas.</p>
<p>Pokud má ovšem kandidát přeskočit lépe postavené kolegy, musí získat o deset procent hlasů víc, než je průměrný počet hlasů na kandidáta ze stejné listiny. To je hlavně ve velkých městech poměrně obtížné. Příklady, kde se přepočet chová zrádně, ukazují na příkladu <a href="http://polit.fss.muni.cz/volebni-system-ktery-neni-takovy-jaky-se-zda/">politologové Otto Eibl a Miloš Gregor</a> nebo <a href="http://www.dvs.cz/clanek.asp?id=6670736">Deník veřejné správy</a>.</p>
<p>Detailní popis volebního systému do obecních zastupitelstev včetně výjimek <a href="https://www.czso.cz/documents/10180/20536900/mandaty.pdf/efc81993-c19e-4fd1-9ce1-2f1dfbeae465?version=1.0">najdete na webu ČSÚ</a>.</p>

<p class="meta meta--right meta--big">
<!--[[ZPRAVY_SNOWFALL_AUTHORS:FOOTER]]-->
</p>
</div>
<!--[[ZPRAVY_SNOWFALL_RELATED:ARTICLES]]-->
</div>
</article>
</div>
</div>
</div><script>
RegExp.escape=function(r){return r.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")},function(){"use strict";var r;(r="undefined"!=typeof jQuery&&jQuery?jQuery:{}).csv={defaults:{separator:",",delimiter:'"',headers:!0},hooks:{castToScalar:function(r,e){if(isNaN(r))return r;if(/\./.test(r))return parseFloat(r);var a=parseInt(r);return isNaN(a)?null:a}},parsers:{parse:function(r,e){var a=e.separator,t=e.delimiter;e.state.rowNum||(e.state.rowNum=1),e.state.colNum||(e.state.colNum=1);var s=[],o=[],n=0,i="",l=!1;function c(){if(n=0,i="",e.start&&e.state.rowNum<e.start)return o=[],e.state.rowNum++,void(e.state.colNum=1);if(void 0===e.onParseEntry)s.push(o);else{var r=e.onParseEntry(o,e.state);!1!==r&&s.push(r)}o=[],e.end&&e.state.rowNum>=e.end&&(l=!0),e.state.rowNum++,e.state.colNum=1}function u(){if(void 0===e.onParseValue)o.push(i);else{var r=e.onParseValue(i,e.state);!1!==r&&o.push(r)}i="",n=0,e.state.colNum++}var f=RegExp.escape(a),d=RegExp.escape(t),m=/(D|S|\r\n|\n|\r|[^DS\r\n]+)/,p=m.source;return p=(p=p.replace(/S/g,f)).replace(/D/g,d),m=new RegExp(p,"gm"),r.replace(m,function(r){if(!l)switch(n){case 0:if(r===a){i+="",u();break}if(r===t){n=1;break}if(/^(\r\n|\n|\r)$/.test(r)){u(),c();break}i+=r,n=3;break;case 1:if(r===t){n=2;break}i+=r,n=1;break;case 2:if(r===t){i+=r,n=1;break}if(r===a){u();break}if(/^(\r\n|\n|\r)$/.test(r)){u(),c();break}throw new Error("CSVDataError: Illegal State [Row:"+e.state.rowNum+"][Col:"+e.state.colNum+"]");case 3:if(r===a){u();break}if(/^(\r\n|\n|\r)$/.test(r)){u(),c();break}if(r===t)throw new Error("CSVDataError: Illegal Quote [Row:"+e.state.rowNum+"][Col:"+e.state.colNum+"]");throw new Error("CSVDataError: Illegal Data [Row:"+e.state.rowNum+"][Col:"+e.state.colNum+"]");default:throw new Error("CSVDataError: Unknown State [Row:"+e.state.rowNum+"][Col:"+e.state.colNum+"]")}}),0!==o.length&&(u(),c()),s},splitLines:function(e,a){if(e){var t=(a=a||{}).separator||r.csv.defaults.separator,s=a.delimiter||r.csv.defaults.delimiter;a.state=a.state||{},a.state.rowNum||(a.state.rowNum=1);var o=[],n=0,i="",l=!1,c=RegExp.escape(t),u=RegExp.escape(s),f=/(D|S|\n|\r|[^DS\r\n]+)/,d=f.source;return d=(d=d.replace(/S/g,c)).replace(/D/g,u),f=new RegExp(d,"gm"),e.replace(f,function(r){if(!l)switch(n){case 0:if(r===t){i+=r,n=0;break}if(r===s){i+=r,n=1;break}if("\n"===r){m();break}if(/^\r$/.test(r))break;i+=r,n=3;break;case 1:if(r===s){i+=r,n=2;break}i+=r,n=1;break;case 2:var e=i.substr(i.length-1);if(r===s&&e===s){i+=r,n=1;break}if(r===t){i+=r,n=0;break}if("\n"===r){m();break}if("\r"===r)break;throw new Error("CSVDataError: Illegal state [Row:"+a.state.rowNum+"]");case 3:if(r===t){i+=r,n=0;break}if("\n"===r){m();break}if("\r"===r)break;if(r===s)throw new Error("CSVDataError: Illegal quote [Row:"+a.state.rowNum+"]");throw new Error("CSVDataError: Illegal state [Row:"+a.state.rowNum+"]");default:throw new Error("CSVDataError: Unknown state [Row:"+a.state.rowNum+"]")}}),""!==i&&m(),o}function m(){if(n=0,a.start&&a.state.rowNum<a.start)return i="",void a.state.rowNum++;if(void 0===a.onParseEntry)o.push(i);else{var r=a.onParseEntry(i,a.state);!1!==r&&o.push(r)}i="",a.end&&a.state.rowNum>=a.end&&(l=!0),a.state.rowNum++}},parseEntry:function(r,e){var a=e.separator,t=e.delimiter;e.state.rowNum||(e.state.rowNum=1),e.state.colNum||(e.state.colNum=1);var s=[],o=0,n="";function i(){if(void 0===e.onParseValue)s.push(n);else{var r=e.onParseValue(n,e.state);!1!==r&&s.push(r)}n="",o=0,e.state.colNum++}if(!e.match){var l=RegExp.escape(a),c=RegExp.escape(t),u=/(D|S|\n|\r|[^DS\r\n]+)/.source;u=(u=u.replace(/S/g,l)).replace(/D/g,c),e.match=new RegExp(u,"gm")}return r.replace(e.match,function(r){switch(o){case 0:if(r===a){n+="",i();break}if(r===t){o=1;break}if("\n"===r||"\r"===r)break;n+=r,o=3;break;case 1:if(r===t){o=2;break}n+=r,o=1;break;case 2:if(r===t){n+=r,o=1;break}if(r===a){i();break}if("\n"===r||"\r"===r)break;throw new Error("CSVDataError: Illegal State [Row:"+e.state.rowNum+"][Col:"+e.state.colNum+"]");case 3:if(r===a){i();break}if("\n"===r||"\r"===r)break;if(r===t)throw new Error("CSVDataError: Illegal Quote [Row:"+e.state.rowNum+"][Col:"+e.state.colNum+"]");throw new Error("CSVDataError: Illegal Data [Row:"+e.state.rowNum+"][Col:"+e.state.colNum+"]");default:throw new Error("CSVDataError: Unknown State [Row:"+e.state.rowNum+"][Col:"+e.state.colNum+"]")}}),i(),s}},helpers:{collectPropertyNames:function(r){var e=[],a=[],t=[];for(e in r)for(a in r[e])r[e].hasOwnProperty(a)&&t.indexOf(a)<0&&"function"!=typeof r[e][a]&&t.push(a);return t}},toArray:function(e,a,t){a=void 0!==a?a:{};var s={};s.callback=void 0!==t&&"function"==typeof t&&t,s.separator="separator"in a?a.separator:r.csv.defaults.separator,s.delimiter="delimiter"in a?a.delimiter:r.csv.defaults.delimiter;var o=void 0!==a.state?a.state:{};a={delimiter:s.delimiter,separator:s.separator,onParseEntry:a.onParseEntry,onParseValue:a.onParseValue,state:o};var n=r.csv.parsers.parseEntry(e,a);if(!s.callback)return n;s.callback("",n)},toArrays:function(e,a,t){a=void 0!==a?a:{};var s={};s.callback=void 0!==t&&"function"==typeof t&&t,s.separator="separator"in a?a.separator:r.csv.defaults.separator,s.delimiter="delimiter"in a?a.delimiter:r.csv.defaults.delimiter;var o;if(void 0!==(a={delimiter:s.delimiter,separator:s.separator,onPreParse:a.onPreParse,onParseEntry:a.onParseEntry,onParseValue:a.onParseValue,onPostParse:a.onPostParse,start:a.start,end:a.end,state:{rowNum:1,colNum:1}}).onPreParse&&a.onPreParse(e,a.state),o=r.csv.parsers.parse(e,a),void 0!==a.onPostParse&&a.onPostParse(o,a.state),!s.callback)return o;s.callback("",o)},toObjects:function(e,a,t){a=void 0!==a?a:{};var s={};s.callback=void 0!==t&&"function"==typeof t&&t,s.separator="separator"in a?a.separator:r.csv.defaults.separator,s.delimiter="delimiter"in a?a.delimiter:r.csv.defaults.delimiter,s.headers="headers"in a?a.headers:r.csv.defaults.headers,a.start="start"in a?a.start:1,s.headers&&a.start++,a.end&&s.headers&&a.end++;var o,n=[];a={delimiter:s.delimiter,separator:s.separator,onPreParse:a.onPreParse,onParseEntry:a.onParseEntry,onParseValue:a.onParseValue,onPostParse:a.onPostParse,start:a.start,end:a.end,state:{rowNum:1,colNum:1},match:!1,transform:a.transform};var i={delimiter:s.delimiter,separator:s.separator,start:1,end:1,state:{rowNum:1,colNum:1}};void 0!==a.onPreParse&&a.onPreParse(e,a.state);var l=r.csv.parsers.splitLines(e,i),c=r.csv.toArray(l[0],a);o=r.csv.parsers.splitLines(e,a),a.state.colNum=1,a.state.rowNum=c?2:1;for(var u=0,f=o.length;u<f;u++){for(var d=r.csv.toArray(o[u],a),m={},p=0;p<c.length;p++)m[c[p]]=d[p];void 0!==a.transform?n.push(a.transform.call(void 0,m)):n.push(m),a.state.rowNum++}if(void 0!==a.onPostParse&&a.onPostParse(n,a.state),!s.callback)return n;s.callback("",n)},fromArrays:function(e,a,t){a=void 0!==a?a:{};var s={};s.callback=void 0!==t&&"function"==typeof t&&t,s.separator="separator"in a?a.separator:r.csv.defaults.separator,s.delimiter="delimiter"in a?a.delimiter:r.csv.defaults.delimiter;var o,n,i,l,c="";for(i=0;i<e.length;i++){for(o=e[i],n=[],l=0;l<o.length;l++){var u=void 0===o[l]||null===o[l]?"":o[l].toString();u.indexOf(s.delimiter)>-1&&(u=u.replace(new RegExp(s.delimiter,"g"),s.delimiter+s.delimiter));var f="\n|\r|S|D";f=(f=f.replace("S",s.separator)).replace("D",s.delimiter),u.search(f)>-1&&(u=s.delimiter+u+s.delimiter),n.push(u)}c+=n.join(s.separator)+"\r\n"}if(!s.callback)return c;s.callback("",c)},fromObjects:function(e,a,t){a=void 0!==a?a:{};var s={};if(s.callback=void 0!==t&&"function"==typeof t&&t,s.separator="separator"in a?a.separator:r.csv.defaults.separator,s.delimiter="delimiter"in a?a.delimiter:r.csv.defaults.delimiter,s.headers="headers"in a?a.headers:r.csv.defaults.headers,s.sortOrder="sortOrder"in a?a.sortOrder:"declare",s.manualOrder="manualOrder"in a?a.manualOrder:[],s.transform=a.transform,"string"==typeof s.manualOrder&&(s.manualOrder=r.csv.toArray(s.manualOrder,s)),void 0!==s.transform){var o,n=e;for(e=[],o=0;o<n.length;o++)e.push(s.transform.call(void 0,n[o]))}var i=r.csv.helpers.collectPropertyNames(e);if("alpha"===s.sortOrder&&i.sort(),s.manualOrder.length>0){var l=[].concat(s.manualOrder);for(u=0;u<i.length;u++)l.indexOf(i[u])<0&&l.push(i[u]);i=l}var c,u,f,d,m=[];for(s.headers&&m.push(i),c=0;c<e.length;c++){for(f=[],u=0;u<i.length;u++)(d=i[u])in e[c]&&"function"!=typeof e[c][d]?f.push(e[c][d]):f.push("");m.push(f)}return r.csv.fromArrays(m,a,s.callback)}},r.csvEntry2Array=r.csv.toArray,r.csv2Array=r.csv.toArrays,r.csv2Dictionary=r.csv.toObjects,"undefined"!=typeof module&&module.exports&&(module.exports=r.csv)}.call(this);
$.ajax({type:"GET",url:"https://data.irozhlas.cz/volby-obecni-2018/data/kandidatky/app/obce/nazvyobci.csv",dataType:"text",success:function(data){hledatko($.csv.toObjects(data));}});function hledatko(data){var nazvyObci=data.sort(function(a,b){if(a.NAZEVFULL<b.NAZEVFULL)return-1;if(a.NAZEVFULL>b.NAZEVFULL)return 1;return 0;});var seznamObci=nazvyObci.map(function(d){return d['NAZEVFULL'];});var obceHledatko=[]
seznamObci.forEach(function(obec){obceHledatko.push([obec,obec.split(" (")[0]]);});$('#vyberObce').autocomplete({delay:500,source:function(request,response){var result=obceHledatko.filter(function(obec){return obec[1].toLowerCase().includes(request.term.toLowerCase());});response(result.map(function(obec){return obec[0];}));},select:function(e){document.getElementById("strany").innerHTML='Načítám data...'
setTimeout(function(){document.getElementById("strany").innerHTML='Načítám data...'
var zvolenaObec=document.getElementById("vyberObce").value;var index=seznamObci.indexOf(zvolenaObec);var idObce=nazvyObci[index]['KODZASTUP'];ukazStrany(zvolenaObec,idObce);},250);}});$('#vyberObce').on('change',function(){setTimeout(function(){document.getElementById("strany").innerHTML='Načítám data...'
var zvolenaObec=document.getElementById("vyberObce").value;var index=seznamObci.indexOf(zvolenaObec);var idObce=nazvyObci[index]['KODZASTUP'];ukazStrany(zvolenaObec,idObce);},250);});};function ukazStrany(zvolenaObec,idObce){$.ajax({type:"GET",url:"https://data.irozhlas.cz/volby-obecni-2018/data/kandidatky/tip/"+idObce+".csv",dataType:"text",success:function(data){pokracuj($.csv.toObjects(data));}});function pokracuj(strany){var idStran=strany.map(function(d){return d['StranaNr'];});var stranyBezId=strany.map(function(d){delete(d['StranaNr']);return(d);});for(i=0;i<stranyBezId.length;i++){stranyBezId[i]['Hlasy (%)']=0
stranyBezId[i]['Mandáty']=0;}
var html='<h3>Kandidující strany</h3>'
html+='<table id="tabulkaStran" class="display" style="width:100%"></table>'
html+='<div id="zpetStrany"><button type="button" id="unter">Pro rozdělení mandátů je potřeba rozdat ještě 100 % hlasů</button></div>'
document.getElementById("strany").innerHTML=html;poskladejTabulkuStran(stranyBezId,idStran,idObce);document.getElementById("obec").style["padding-bottom"]="30px";$(function(){$('#tabulkaStran').DataTable({columnDefs:[{targets:0,type:'diacritics-neutralise'},{targets:[3,4],orderable:false}],"order":[[0,"asc"]],responsive:{details:{display:$.fn.dataTable.Responsive.display.childRowImmediate,type:''}},"ordering":true,"paging":false,"bInfo":false,"language":{"url":"https://interaktivni.rozhlas.cz/tools/datatables/Czech.json"}});});};};function prepocitejProcenta(){var rozdelenoHlasu=0;$(".vysledek").each(function(){var vysledek=parseInt(this.value);if(isNaN(vysledek)){vysledek=0;}
rozdelenoHlasu=rozdelenoHlasu+vysledek;})
if(rozdelenoHlasu==100){var html='<button type="button" id="klikaci" onclick ="spocitejMandaty()">Spočítat mandáty</button></div>'}else if(rozdelenoHlasu>100){var html='<button type="button" id="uber">Pro rozdělení mandátů je potřeba rozdat o '+(rozdelenoHlasu-100)+' % hlasů méně</button></div>'}else{var html='<button type="button" id="unter">Pro rozdělení mandátů je potřeba rozdat ještě '+(100-rozdelenoHlasu)+' % hlasů</button></div>'}
document.getElementById("zpetStrany").innerHTML=html;}
function spocitejMandaty(){var pocetStran=$(".nazevStrany").length
var strany=[];var pocetKand=[];var pocetMand;var procenta=[];var falesnyPrah=[];var prah=5;var prepocet=new Array(pocetStran);var mandaty=[];var mobil=false;$(".nazevStrany").each(function(){strany.push($(this).text())})
$(".pocetKand").each(function(){pocetKand.push($(this).text())});pocetMand=parseInt(pocetKand[0].substr(pocetKand[0].indexOf('/')+1,pocetKand[0].length+1));$(".vysledek").each(function(){procenta.push($(this).val())});if(procenta.length===pocetStran*2){mobil=true;procenta=procenta.filter(function(procento,index){return index%2});}
for(i=0;i<pocetStran;i++){mandaty.push(0);pocetKand[i]=parseInt(pocetKand[i].substr(0,pocetKand[i].indexOf('/')));}
for(i=0;i<pocetStran;i++){var pocetKandProFalesnyPrah=parseInt(pocetKand[i]);if(pocetKandProFalesnyPrah>pocetMand){pocetKandProFalesnyPrah=pocetMand;}
falesnyPrah[i]=parseInt(procenta[i])*parseInt(pocetMand)/pocetKandProFalesnyPrah;}
for(i=1;i<5;i++){var pocetStranNadPrahem=0;var pocetKandidatuNadPrahem=0;for(j=0;j<pocetStran;j++){if(falesnyPrah[j]>prah){pocetStranNadPrahem++;pocetKandidatuNadPrahem=pocetKandidatuNadPrahem+pocetKand[j];}}
if(pocetStranNadPrahem<2||pocetKandidatuNadPrahem<pocetMand/2||pocetKandidatuNadPrahem<5){prah--;}}
if(pocetStran==1){prah=0;}
for(i=0;i<pocetStran;i++){prepocet[i]=new Array(pocetMand);}
for(i=0;i<pocetStran;i++){for(j=1;j<pocetMand+1;j++){if(falesnyPrah[i]>prah){prepocet[i][j-1]=procenta[i]*pocetKand[i]/j;}else{prepocet[i][j-1]=0;}}}
var obsazeno=0;var max=101;while((obsazeno<pocetMand)&(max>0)){var maxRow=prepocet.map(function(row){return Math.max.apply(Math,row);});max=Math.max.apply(null,maxRow);for(i=0;i<pocetStran;i++){for(j=0;j<pocetMand;j++){if((prepocet[i][j]==max)&(max>0)){prepocet[i][j]=0;max=101;if(mandaty[i]<pocetKand[i]){mandaty[i]=parseInt(mandaty[i])+1;obsazeno++;}}}}}
if(!mobil){for(i=0;i<pocetStran;i++){document.getElementsByClassName("mandaty")[i].textContent=mandaty[i];}}else{for(i=0;i<pocetStran;i++){document.getElementsByClassName("mandaty")[(i*2)+1].textContent=mandaty[i];}}
nakresliGraf(strany,procenta,mandaty);document.getElementById("strany").style["padding-bottom"]="30px";document.getElementById("zpetStrany").scrollIntoView();var html='<button type="button" onclick="zpetNaKandidaty()">Zpět na kandidátky ↑</button>'
document.getElementById("zpet").innerHTML=html;}
function poskladejTabulkuStran(seznamStran,idStran,idObce){var columns=poskladejHlavickuStran(seznamStran);$('#tabulkaStran').append('<tbody>');for(var i=0;i<seznamStran.length;i++){var row$=$('<tr/>');for(var colIndex=0;colIndex<columns.length;colIndex++){var cellValue=seznamStran[i][columns[colIndex]];var nazevStrany='\''+seznamStran[i]['Strana']+'\'';if(colIndex==0){cellValue='<div class="nazevStrany">'+cellValue+'</div>';}
if(colIndex==1){cellValue='<div class="pocetKand">'+cellValue+'</div>';}
if(colIndex==columns.length-1){cellValue='<div class="mandaty">'+cellValue+'</div>';}
if(colIndex==columns.length-2){cellValue='<form onsubmit="return false"><div class="autocomplete percent"><input oninput="prepocitejProcenta()" class="vysledek" id="vysledekStrany" type="number" min="0" max="100" step="1" value="0"></div></form>'}
if(cellValue==null)cellValue="";row$.append($('<td/>').html(cellValue));}
$('#tabulkaStran').append(row$);}};function poskladejHlavickuStran(seznamStran){var columnSet=[];$('#tabulkaStran').append('<thead id="seznamStranHlavicka">');var headerTr$=$('<tr>');for(var i=0;i<seznamStran.length;i++){var rowHash=seznamStran[i];for(var key in rowHash){if($.inArray(key,columnSet)==-1){columnSet.push(key);headerTr$.append($('<th/>').html(key));}}}
$('#seznamStranHlavicka').append(headerTr$);return columnSet;};function nakresliGraf(strany,procenta,mandaty){var mandatyCelkem=mandaty.reduce(function(a,b){return a+b;},0);for(i=0;i<mandaty.length;i++){mandaty[i]=Math.round(100*mandaty[i]/mandatyCelkem,1);procenta[i]=parseInt(procenta[i])}
document.getElementById("vysledek").style["height"]="600px";var colors=['#deebf7','#2171b5']
var chart=Highcharts.chart('vysledek',{chart:{type:'column'},title:{text:'Zisk hlasů vs. mandátů'},xAxis:{categories:strany},yAxis:{title:{text:'Zisk hlasů vs. mandátů'},labels:{format:'{value} %'}},tooltip:{pointFormat:'{point.series.name}: <b>{point.y} %<br/>',shared:true},exporting:{enabled:false},credits:{href:'',text:''},series:[{name:'Hlasy',data:procenta,color:colors[0]},{name:'Mandáty',data:mandaty,color:colors[1]}]});}
function zpetNaKandidaty(){document.getElementById("strany").scrollIntoView();}
var links=document.getElementsByTagName('a');for(var i=0,linksLength=links.length;i<linksLength;i++){if(links[i].hostname!=window.location.hostname){links[i].target='_blank';links[i].rel='noopener noreferrer';};};</script>
